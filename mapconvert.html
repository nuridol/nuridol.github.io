<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <!-- Custom styles for this template -->
    <link href="css/navbar.css" rel="stylesheet">
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://raw.githubusercontent.com/aFarkas/html5shiv/master/dist/html5shiv.min.js"></script>
    <![endif]-->

    <meta name="description" content="convert Google Maps iframe tag to object tag, Google Maps 블로그용 변환기">
    <meta name="author" content="NuRi">
    <!-- http://www.wpzoom.com/wpzoom/new-freebie-wpzoom-developer-icon-set-154-free-icons/ -->
    <link rel="shortcut icon" href="icon/tools.png">
    <title>NuRi's Tools - Google Maps 변환기</title>
  </head>
  <body>
    <!-- Wrap all page content here -->
    <div id="wrap">
      <!-- Fixed navbar -->
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
          <!-- Brand and toggle get grouped for better mobile display -->
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">NuRi's Tools</a>
          </div>
          <!-- Collect the nav links, forms, and other content for toggling -->
          <div class="collapse navbar-collapse" id="navbar-collapse">
            <ul class="nav navbar-nav">
              <li><a href="if_convert.html"><span class="glyphicon glyphicon-refresh"></span> Iframe</a></li>
              <li><a href="ut_convert.html"><span class="fa fa-youtube fa-lg"></span> YouTube</a></li>
              <li class="active"><a href="mapconvert.html"><span class="glyphicon glyphicon-map-marker"></span> Maps</a></li>
              <li><a href="stock_jp.html"><span class="glyphicon glyphicon-phone"></span> <small>iPhone stock JP</small></a></li>
              <li><a href="stock_hk.html"><span class="glyphicon glyphicon-phone"></span> <small>iPhone stock HK</small></a></li>
              <li><a href="stock_watch_jp.html"><span>⌚</span> <small>Watch stock JP</small></a></li>
              <li><a href="twitter.html"><span class="fa fa-twitter fa-lg"></span> <small>Twitter Pic <span class="glyphicon glyphicon-download"></small></a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div><!-- /.container -->
      </div>

      <!-- Begin page content -->
      <div class="container">
        <div class="page-header">
          <h2><span class="bg-success">Google Maps</span> 변환기 <small>Convert Google Maps iframe to object code</small></h2>
        </div>
        <div class="well well-sm">
          <div class="input-group">
            <span class="input-group-addon">iframe</span>
            <textarea rows="4" id="code" placeholder="구글맵 iframe 코드를 넣으세요(input Google map iframe code here)" class="form-control code_input"></textarea>
          </div>
          <div style="max-width: 300px; margin: 10px auto 10px;">
            <button class="btn btn-block btn-primary" type="submit" id="convert"><i class="icon-wrench icon-white"></i> Convert</button>
          </div>
          <div class="input-group">
            <span class="input-group-addon">object</span>
            <textarea rows="6" id="result" class="form-control" disabled="disabled"></textarea>
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-body">
            <div class="notice">구글 맵 링크 <a href="https://www.google.com/maps/?hl=ko"><span class="label label-success">한국어</span></a> <a href="https://www.google.com/maps/?hl=en"><span class="label label-info">영어</span></a> <a href="https://www.google.com/maps/?hl=jp"><span class="label label-primary">일어</span></a></div>
          </div>
        </div>

        <div id="testbox"></div>
      </div>
    </div>

    <div id="footer">
      <div class="container">
        <p class="text-muted credit">&copy; nuridol.net</p>
      </div>
    </div>
 
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
     <!-- https://github.com/scottjehl/Respond -->
    <!-- script src="js/respond.min.js"></script -->
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-36127443-1', 'auto');
      ga('require', 'linkid', 'linkid.js');
      ga('require', 'displayfeatures');
      ga('send', 'pageview');
    </script>
    <script type="text/javascript">

    (function () {
      if (typeof jQuery == 'undefined') {
          return;
      }
      jQuery.noConflict();
      var $ = jQuery;

      function encodeMapCode() {
        var code = $("#code").val().replace(/\n/g, "");
        code = code.replace(/^\s+|\s+$/, "");

        var convertedCode = "";
        if  (code.match(/^<iframe/)) {
          $("#testbox").html(code);
          var width  = $("#testbox").find('iframe:first').attr('width');
          if (parseInt(width, 10) > 0) {
              width = parseInt(width, 10);
          }
          else {
              width = "100%";
          }

          var height = $("#testbox").find('iframe:first').attr('height');
          if (parseInt(height, 10) > 0) {
              height = parseInt(height, 10);
          }
          else {
              height = "auto";
          }

          var extraCode = code.replace(/<iframe.*<\/iframe>/, "");

          var extraAttrs = "";
          var attrs = $("#testbox").find('iframe:first')[0].attributes;
          for(var i=0;i<attrs.length;i++) {
            if (attrs[i].nodeName == "src" || attrs[i].nodeName == "width" || attrs[i].nodeName == "height") {
              continue;
            }
            extraAttrs = extraAttrs + " " + attrs[i].nodeName;
            if (attrs[i].nodeValue != "") {
              extraAttrs = extraAttrs + '="' + attrs[i].nodeValue + '"';
            }
          }

          var iframeSrc = $("#testbox").find('iframe:first').attr('src');
          convertedCode = '<div><object width="' + width + '" height="' + height + '" data="' + iframeSrc + '" type="text/html" ' + extraAttrs + '></object></div>';
          convertedCode = convertedCode + '<div>' + extraCode + '</div><p><a href="https://nuridol.net/mapconvert.html">NuRi\'s Tools - Google Maps 변환기</a></p>';
        }
        $("#result").text(convertedCode);
        $("#result").removeAttr("disabled");
      }

      $(document).ready(function () {
        if (!$('#code') || !$('#result') || !$('#convert')) {
            return;
        }

        $('#convert').click(function () {
            encodeMapCode();
        });
      });

    })();
    </script>
  </body>
</html>
